---
title: "Spring Boot åˆ†é¡µæŸ¥è¯¢ï¼šåŸç”Ÿåˆ†é¡µä¸ PageHelper å®ç°"
date: 2025-07-26
author: Warren Wu
tags:
  - Spring Boot
  - PageHelper
  - MyBatis
  - åˆ†é¡µæŸ¥è¯¢
categories:
  - åç«¯å¼€å‘
---

# Spring Boot åˆ†é¡µæŸ¥è¯¢è¯¦è§£

æœ¬æ–‡ä»‹ç»ä¸¤ç§åˆ†é¡µå®ç°æ–¹å¼ï¼š

- âœ… è‡ªå®šä¹‰ SQL åˆ†é¡µ
- âœ… ä½¿ç”¨ PageHelper æ’ä»¶è‡ªåŠ¨åˆ†é¡µ

---

## ä¸€ã€è‡ªå®šä¹‰ SQL åˆ†é¡µå®ç°

### ğŸ“¦ ä¾èµ–é…ç½®ï¼ˆpom.xmlï¼‰

```xml
<dependency>
    <groupId>com.github.pagehelper</groupId>
    <artifactId>pagehelper-spring-boot-starter</artifactId>
    <version>2.1.1</version>
</dependency>
```

## Controller å±‚
```xml
@GetMapping("/emps")
public Result page(@RequestParam(defaultValue = "1") Integer page,
                   @RequestParam(defaultValue = "10") Integer pageSize) {
    log.info("åˆ†é¡µæŸ¥è¯¢ï¼Œå‚æ•°ï¼špage={}, pagesize={}", page, pageSize);
    PageBean pageBean = empService.page(page, pageSize);
    return Result.success(pageBean);
}
```

## Service å±‚
```xml
@Override
public PageBean page(Integer page, Integer pageSize) {
    Long count = empMapper.count(); // æŸ¥è¯¢å‘˜å·¥æ€»æ•°
    List<Emp> empList = empMapper.page((page - 1) * pageSize, pageSize); // åˆ†é¡µæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯
    return new PageBean(count, empList);
}
```

## Mapper æ¥å£
```xml
/**
 * æŸ¥è¯¢å‘˜å·¥æ€»æ•°
 */
@Select("SELECT COUNT(*) FROM emp")
Long count();

/**
 * åˆ†é¡µæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯
 */
@Select("SELECT * FROM emp LIMIT #{start}, #{pageSize}")
List<Emp> page(Integer start, Integer pageSize);
```

# äºŒã€ä½¿ç”¨ PageHelper æ’ä»¶åˆ†é¡µ

## Service å±‚ï¼ˆä½¿ç”¨ PageHelperï¼‰
```xml
@Override
public PageBean page(Integer page, Integer pageSize) {
    // 1. è®¾ç½®åˆ†é¡µå‚æ•°
    PageHelper.startPage(page, pageSize);

    // 2. æ‰§è¡ŒæŸ¥è¯¢
    List<Emp> empList = empMapper.list();

    // 3. å°†ç»“æœè½¬æ¢ä¸º Page å¯¹è±¡
    Page<Emp> p = (Page<Emp>) empList;

    // 4. å°è£…åˆ†é¡µç»“æœ
    return new PageBean(p.getTotal(), p.getResult());
}
```

## Mapper æ¥å£

```xml
@Select("SELECT * FROM emp")
List<Emp> list();
```
